{"version":3,"sources":["main.js"],"names":["STORAGE_KEY","todoStorage","fetch","todos","JSON","parse","localStorage","getItem","forEach","todo","index","id","uid","length","save","setItem","stringify","Vue","el","data","current","options","value","label","computed","computedTodos","filter","state","labels","reduce","a","b","Object","assign","watch","handler","deep","created","methods","doAdd","event","comment","$refs","push","doChangeState","item","doRemove","indexOf","splice"],"mappings":"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","file":"main.1f19ae8e.map","sourceRoot":"../src","sourcesContent":["\n// ★STEP2\n// https://jp.vuejs.org/v2/examples/todomvc.html\nvar STORAGE_KEY = 'todos-vuejs-demo'\nvar todoStorage = {\n  fetch: function () {\n    var todos = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]')\n    todos.forEach(function (todo, index) {\n      todo.id = index\n    })\n    todoStorage.uid = todos.length\n    return todos\n  },\n  save: function (todos) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))\n  }\n}\n\n// ★STEP1\nnew Vue({\n  el: '#app',\n\n  data: {\n    // ★STEP5 localStorage から 取得した ToDo のリスト\n    todos: [],\n    // ★STEP11 抽出しているToDoの状態\n    current: -1,\n    // ★STEP11＆STEP13 各状態のラベル\n    options: [\n      { value: -1, label: 'すべて' },\n      { value: 0, label: '作業中' },\n      { value: 1, label: '完了' }\n    ]\n  },\n\n  computed: {\n\n    // ★STEP12\n    computedTodos: function () {\n      return this.todos.filter(function (el) {\n        return this.current < 0 ? true : this.current === el.state\n      }, this)\n    },\n\n    // ★STEP13 作業中・完了のラベルを表示する\n    labels() {\n      return this.options.reduce(function (a, b) {\n        return Object.assign(a, { [b.value]: b.label })\n      }, {})\n      // キーから見つけやすいように、次のように加工したデータを作成\n      // {0: '作業中', 1: '完了', -1: 'すべて'}\n    }\n  },\n\n  // ★STEP8\n  watch: {\n    // オプションを使う場合はオブジェクト形式にする\n    todos: {\n      // 引数はウォッチしているプロパティの変更後の値\n      handler: function (todos) {\n        todoStorage.save(todos)\n      },\n      // deep オプションでネストしているデータも監視できる\n      deep: true\n    }\n  },\n\n  // ★STEP9\n  created() {\n    // インスタンス作成時に自動的に fetch() する\n    this.todos = todoStorage.fetch()\n  },\n\n  methods: {\n\n    // ★STEP7 ToDo 追加の処理\n    doAdd: function(event, value) {\n      // ref で名前を付けておいた要素を参照\n      var comment = this.$refs.comment\n      // 入力がなければ何もしないで return\n      if (!comment.value.length) {\n        return\n      }\n      // { 新しいID, コメント, 作業状態 }\n      // というオブジェクトを現在の todos リストへ push\n      // 作業状態「state」はデフォルト「作業中=0」で作成\n      this.todos.push({\n        id: todoStorage.uid++,\n        comment: comment.value,\n        state: 0\n      })\n      // フォーム要素を空にする\n      comment.value = ''\n    },\n\n    // ★STEP10 状態変更の処理\n    doChangeState: function (item) {\n      item.state = !item.state ? 1 : 0\n    },\n\n    // ★STEP10 削除の処理\n    doRemove: function (item) {\n      var index = this.todos.indexOf(item)\n      this.todos.splice(index, 1)\n    }\n\n  }\n})\n"]}